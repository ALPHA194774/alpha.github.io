{% extends "base.html" %}
{% block title %}{{ item.title }} â€” CraftGhana{% endblock %}

{% block content %}
<div class="container mt-5" style="max-width: 800px;">
  <div class="card shadow-sm">

    {% if item.images %}
      <!-- Carousel for multiple images -->
      <div id="carousel{{ item.id }}" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner">
          {% for img in item.images %}
            <div class="carousel-item {% if loop.first %}active{% endif %}">
              <img src="{{ url_for('uploads', filename=img.filename) }}" 
                   class="d-block w-100" 
                   style="max-height:400px; object-fit:cover;" 
                   alt="{{ item.title }}">
            </div>
          {% endfor %}
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carousel{{ item.id }}" data-bs-slide="prev">
          <span class="carousel-control-prev-icon"></span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carousel{{ item.id }}" data-bs-slide="next">
          <span class="carousel-control-next-icon"></span>
        </button>
      </div>
    {% elif item.image_filename %}
      <!-- Single primary image -->
      <img src="{{ url_for('uploads', filename=item.image_filename) }}" 
           alt="{{ item.title }}" 
           class="card-img-top" style="max-height:400px; object-fit:cover;">
    {% else %}
      <!-- Placeholder -->
      <img src="https://via.placeholder.com/800x400?text=No+Image" alt="No image" class="card-img-top">
    {% endif %}

    <div class="card-body">
      <h2 class="card-title">{{ item.title }}</h2>
      <p class="card-text">{{ item.description }}</p>
      <p class="fw-bold">ðŸ’° Price: â‚µ{{ "%.2f"|format(item.price) }}</p>
      <p class="text-muted">ðŸ“¦ Available: {{ item.quantity }}</p>

      <div class="d-flex">
        <a href="{{ url_for('cart_add', item_id=item.id) }}" class="btn btn-success me-2">âž• Add to Cart</a>
        <a href="{{ url_for('browse') }}" class="btn btn-secondary">â¬… Back to Browse</a>
      </div>
    </div>
  </div>
</div>
{% endblock %}
