{% extends "base.html" %}
{% block title %}Browse ‚Äî CraftGhana{% endblock %}

<body class="browse-page">
{% block content %}

<section class="browse-hero" style="background-image: url('{{ url_for('static', filename='images/browse-bg.jpg') }}');">
    <div class="overlay"></div>
    <div class="container browse-container p-4 rounded shadow-lg">
        <h1 class="mb-4 text-center">üõç Browse Crafts</h1>

        <!-- Search + Category Filter -->
        <form method="get" class="row g-3 align-items-center mb-4">
            <div class="col-md-6">
                <input type="text" name="q" class="form-control" placeholder="Search..." value="{{ q }}">
            </div>
            <div class="col-md-4">
                <select name="category" class="form-select">
                    <option value="">All Categories</option>
                    {% for cat in categories %}
                        <option value="{{ cat }}" {% if selected_category == cat %}selected{% endif %}>
                            {{ cat }}
                        </option>
                    {% endfor %}
                </select>
            </div>
            <div class="col-md-2 d-grid">
                <button type="submit" class="btn btn-primary">üîç Search</button>
            </div>
        </form>

        <!-- Item Grid -->
        <div class="row">
            {% for item in items %}
                <div class="col-md-3 col-sm-6 mb-4">
                    <div class="card h-100 shadow-sm item-card">
                        {% if item.image_filename %}
                            <img src="{{ url_for('uploads', filename=item.image_filename) }}" 
                                 class="card-img-top" alt="{{ item.title }}" 
                                 style="height:200px; object-fit:cover;">
                        {% else %}
                            <img src="{{ url_for('static', filename='images/placeholder.png') }}" 
                                 class="card-img-top" alt="No image" style="height:200px; object-fit:cover;">
                        {% endif %}
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">{{ item.title }}</h5>
                            <p class="card-text text-truncate">{{ item.description }}</p>
                            <p class="fw-bold">‚Çµ{{ "%.2f"|format(item.price) }}</p>
                            <p class="text-muted"><small>Available: {{ item.quantity }}</small></p>
                            <div class="mt-auto d-grid gap-2">
                                <a href="{{ url_for('item_detail', item_id=item.id) }}" class="btn btn-outline-primary btn-sm">
                                    View Details
                                </a>
                                <a href="{{ url_for('cart_add', item_id=item.id) }}" class="btn btn-success btn-sm">
                                    ‚ûï Add to Cart
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            {% else %}
                <div class="col-12">
                    <div class="alert alert-info">No items found.</div>
                </div>
            {% endfor %}
        </div>
    </div>
</section>

{% endblock %}
