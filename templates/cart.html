{% extends "base.html" %}
{% block title %}Your Cart â€” CraftGhana{% endblock %}

{% block content %}
<div class="container mt-5">
  <h1 class="mb-4">ðŸ›’ Your Cart</h1>

  {% if rows %}
    <div class="table-responsive">
      <table class="table table-striped table-bordered align-middle">
        <thead class="table-dark">
          <tr>
            <th>Item</th>
            <th>Qty</th>
            <th>Price</th>
            <th>Subtotal</th>
          </tr>
        </thead>
        <tbody>
          {% for row in rows %}
          <tr>
            <td>{{ row.item.title }}</td>
            <td>{{ row.qty }}</td>
            <td>â‚µ{{ "%.2f"|format(row.item.price) }}</td>
            <td>â‚µ{{ "%.2f"|format(row.subtotal) }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div class="d-flex justify-content-between align-items-center mt-3">
      <h4>Total: <span class="text-success">â‚µ{{ "%.2f"|format(total) }}</span></h4>
      <div>
        <a href="{{ url_for('cart_clear') }}" class="btn btn-outline-danger me-2">ðŸ—‘ Clear Cart</a>
        {% if current_user.is_authenticated %}
          <form method="post" action="{{ url_for('checkout') }}" style="display:inline;">
            <button type="submit" class="btn btn-success">âœ… Checkout</button>
          </form>
        {% else %}
          <a href="{{ url_for('login') }}" class="btn btn-primary">ðŸ”‘ Login to Checkout</a>
        {% endif %}
      </div>
    </div>
  {% else %}
    <div class="alert alert-info">
      No items in your cart. <a href="{{ url_for('browse') }}" class="alert-link">Start browsing</a>!
    </div>
  {% endif %}
</div>
{% endblock %}
